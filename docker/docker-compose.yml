version: '3'
services:
  grizly_notebook:
    build: 
      context: ../
      dockerfile: docker/Dockerfile
      args:
      - HTTP_PROXY=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - ALTERNATIVE_PROXY=${ALTERNATIVE_PROXY}
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - GRIZLY_PROXY=${GRIZLY_PROXY}
      - GRIZLY_DASK_SCHEDULER_ADDRESS=${GRIZLY_DASK_SCHEDULER_ADDRESS}
      - GRIZLY_EXTRACT_STAGING_EXTERNAL_SCHEMA=${GRIZLY_EXTRACT_STAGING_EXTERNAL_SCHEMA}
      - GRIZLY_EXTRACT_STAGING_SCHEMA=${GRIZLY_EXTRACT_STAGING_SCHEMA}
    ports:
      - "8889:8888"
    volumes:
      - .docker/docker_home:/home/analyst
      - .docker/docker_home/.config/odbc.ini:/etc/odbc.ini
    container_name: grizly_notebook
    restart: "always"
  sqlmanager:
    image: sqlpad/sqlpad:latest
    volumes:
      - .docker/docker_home/sqlpad:/var/lib/sqlpad
    environment:
      - SQLPAD_SESSION_MINUTES=999999
    ports:
      - "3000:3000"
    container_name: sqlpad
    restart: "always"
